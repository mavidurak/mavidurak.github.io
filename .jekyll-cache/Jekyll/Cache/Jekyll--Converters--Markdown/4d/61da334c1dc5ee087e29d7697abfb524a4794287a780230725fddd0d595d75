I"¬<p>Merhabalar</p>

<p>Bu yazÄ±mda express uygulamalarÄ±mÄ±zda kullanmak Ã¼zere kendi template motorlarÄ±mÄ±zÄ± nasÄ±l yaratabileceÄŸimizi anlatmaya Ã§alÄ±ÅŸÄ±yorum.</p>

<p>Node JSâ€™in en popÃ¼ler uygulama geliÅŸtirme Ã§atÄ±sÄ± olan expressâ€™de server-side render yani sunucu taraflÄ± Ã§Ä±ktÄ± hazÄ±rlama iÅŸlemleri iÃ§in template engine adÄ± verilen ÅŸablon motorlarÄ±nÄ± kullanÄ±rÄ±z, Ã¶rneÄŸin en popÃ¼lerleri <b>jade</b> ve <b>ejs</b> dir.<!--more--></p>

<p>Peki eÄŸer istersek bizim belirlediÄŸimiz kurallarla Ã§alÄ±ÅŸan kendi template motorlarÄ±mÄ±zÄ± yaratmamÄ±z mÃ¼mkÃ¼n mÃ¼?</p>

<p><b>Tabi ki mÃ¼mkÃ¼n</b></p>

<p>Expressâ€™de kullanmak Ã¼zere kendi template motorunu yaratmak iÃ§in <code>app.engine(ext, callback)</code> metodunu kullanabilirsin, bu metodun aldÄ±ÄŸÄ± birinci parametre <code>ext</code> <b>extension</b> yani dosya uzantÄ±sÄ±nÄ± temsil eder, ikinci parametre de template motorunun dosyayÄ± kabul ettikten sonra yapacaÄŸÄ± iÅŸlemler iÃ§in bir asenkron fonksiyondur, bu fonksiyona girilecek objeler <b>filePath</b> adÄ±ndaki dosya adresi ve  ÅŸablona basÄ±lacak dinamik deÄŸerleri iÃ§erecek olan <b>options</b> objesidir.</p>

<p>Åimdi aÅŸaÄŸÄ±daki kodla Ã§ok basit bi template motoru geliÅŸtirelim, dosya uzantÄ±mÄ±z â€œ.ebeâ€ olsun.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// dosya iÅŸlemleri yapacaÄŸÄ±mÄ±z iÃ§in fs modÃ¼lÃ¼nÃ¼ Ã§aÄŸÄ±rmak zorundayÄ±z</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">engine</span><span class="p">(</span><span class="dl">'</span><span class="s1">ebe</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">filePath</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// burada template incaynÄ±mÄ±zÄ± tanÄ±mlÄ±yoruz ^^</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">filePath</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="c1">// burada Ã§ok basit bi render iÅŸlemi yapÄ±yoruz ancak mantÄ±ÄŸÄ± anlamana yetecektir</span>
    <span class="kd">var</span> <span class="nx">rendered</span> <span class="o">=</span> <span class="nx">content</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="dl">'</span><span class="s1">#title#</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;title&gt;</span><span class="dl">'</span><span class="o">+</span> <span class="nx">options</span><span class="p">.</span><span class="nx">title</span> <span class="o">+</span><span class="dl">'</span><span class="s1">&lt;/title&gt;</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">'</span><span class="s1">#message#</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;h1&gt;</span><span class="dl">'</span><span class="o">+</span> <span class="nx">options</span><span class="p">.</span><span class="nx">message</span> <span class="o">+</span><span class="dl">'</span><span class="s1">&lt;/h1&gt;</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">rendered</span><span class="p">);</span>
  <span class="p">})</span>
<span class="p">});</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">views</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">./views</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// burada views klasÃ¶rÃ¼mÃ¼zÃ¼ kendimiz belirleyebiliriz</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">view engine</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ebe</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// dosya uzantÄ±mÄ±zÄ± belirterek template motorumuzu express'e tanÄ±mlÄ±yoruz</span></code></pre></figure>

<p>Express uygulamamÄ±z artÄ±k <b>.ebe</b> uzantÄ±lÄ± dosyalarÄ± render edebilecek, hemen index.ebe adÄ±nda bir dosya oluÅŸturup <b>view</b> klasÃ¶rÃ¼nÃ¼n iÃ§ine atalÄ±m ve iÃ§ine ÅŸunlarÄ± yazalÄ±m.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="err">#</span><span class="nx">title</span><span class="err">#</span>
<span class="err">#</span><span class="nx">message</span><span class="err">#</span></code></pre></figure>

<p>Daha sonra express uygulamamÄ±zda ÅŸu rotayÄ± tanÄ±mlÄ±yoruz.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="dl">'</span><span class="s1">index</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Ebe Template Engine</span><span class="dl">'</span><span class="p">,</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Web artÄ±k ebelere emanet!</span><span class="dl">'</span><span class="p">});</span>
<span class="p">})</span></code></pre></figure>

<p>UygulamayÄ± ayaÄŸa kaldÄ±rdÄ±ktan sonra â€œ/â€ adresini ziyaret edip sonucun htmlâ€™e render edilmiÅŸ halini gÃ¶rebilirsin.</p>
:ET